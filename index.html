<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>R Client Access to Clonal Raider ANT (CRANT) Datasets • crantr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R Client Access to Clonal Raider ANT (CRANT) Datasets">
<meta name="description" content="Access to the Clonal Raider ANT (CRANT) EM datasets, starting with CRANTb and focussing on support for autosegmentation. Organised as a wrapper around the fafbseg and bancr packages.">
<meta property="og:description" content="Access to the Clonal Raider ANT (CRANT) EM datasets, starting with CRANTb and focussing on support for autosegmentation. Organised as a wrapper around the fafbseg and bancr packages.">
<meta property="og:image" content="https://flyconnectome.github.io/crantr/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">crantr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="index.html" aria-label="Home"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/crant_alpn_split.html">Plot examples from the CRANT connectome</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="SUPPORT.html">Help</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://natverse.github.io">natverse</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/flyconnectome/crantr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><p><a href="https://natverse.github.io" class="external-link"><img src="https://img.shields.io/badge/natverse-Part%20of%20the%20natverse-a241b6" alt="natverse"></a> <a href="https://flyconnectome.github.io/crantr/reference/"><img src="https://img.shields.io/badge/docs-100%25-brightgreen.svg" alt="Docs"></a> <a href="https://github.com/flyconnectome/crantr/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/flyconnectome/crantr/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a> <!-- badges: end --> crantr <img src="reference/figures/logo.png" align="right" height="139" alt=""> ===========</p>
<p><strong>crantr</strong> is an R package designed to support the analysis of connectome data sets for the clonal raider ant (<em>Ooceraea biroi</em>, formerly <em>Cerapachys biroi</em>). The package primarily focuses on proofread auto-segmentation data from the <a href="https://proofreading.zetta.ai/info/api/v2/datastack/full/kronauer_ant?middle_auth_url=proofreading.zetta.ai%2Fsticky_auth" class="external-link">CRANT (Clonal Raider Ant) project</a>.</p>
<p>The project was founded as a collaboration between the laboratories of <a href="https://www.lee.hms.harvard.edu/" class="external-link">Wei-Chung Allen Lee</a>, <a href="https://www.rockefeller.edu/our-scientists/heads-of-laboratories/988-daniel-kronauer/" class="external-link">Daniel Kronauer</a> and <a href="https://www.research-in-bavaria.de/research-news/details/article/new-junior-research-group-hannah-haberkern-investigates-navigation-in-flies-and-ants/" class="external-link">Hannah Haberkern</a>, among others.</p>
<p>This project has a community based in the <a href="https://app.slack.com/client/T07RC68DXQA/C07S10GRL9W" class="external-link">CRANT slack</a>. Equivalent python tools are available <a href="https://social-evolution-and-behavior.github.io/crantpy/intro.html" class="external-link">here</a>. Publication-quality plots can be made with <a href="https://github.com/natverse/nat.ggplot?tab=readme-ov-file" class="external-link">nat.ggplot</a>.</p>
<div class="float">
<img src="https://github.com/flyconnectome/crantr/blob/main/inst/images/crantb_example_neuron_ggplot.png?raw=true" alt="crantb_example_neuron_ggplot"><div class="figcaption">crantb_example_neuron_ggplot</div>
</div>
<div class="section level3">
<h3 id="about-clonal-raider-ants">About Clonal Raider Ants<a class="anchor" aria-label="anchor" href="#about-clonal-raider-ants"></a>
</h3>
<p>Clonal raider ants (<em>Ooceraea biroi</em>) are a fascinating species of ant known for their unique reproductive biology and social structure:</p>
<ul>
<li>They reproduce clonally via parthenogenesis.</li>
<li>They lack a queen caste, and all workers in the colony lay eggs.</li>
<li>They exhibit complex social behaviors, including division of labor, chemical communication, and cooperative parental care.</li>
<li>It is possible to make <a href="https://www.cell.com/fulltext/S0092-8674(17)30772-9" class="external-link">mutant</a> and <a href="https://www.cell.com/cell/fulltext/S0092-8674(23)00544-5" class="external-link">transgenic</a> ants to explore the neural and genetic basis of behaviors.</li>
</ul>
<p>These characteristics make clonal raider ants an excellent model system for studying the neural basis of social behavior and the evolution of eusociality in insects.</p>
</div>
<div class="section level3">
<h3 id="current-data-availability">Current Data Availability<a class="anchor" aria-label="anchor" href="#current-data-availability"></a>
</h3>
<p>At present, the connectome data for one brain is available: <strong>CRANTb</strong>, which represents the brain of a worker clonal raider ant.</p>
</div>
<div class="section level2">
<h2 id="package-features">Package Features<a class="anchor" aria-label="anchor" href="#package-features"></a>
</h2>
<p>The <strong>crantr</strong> package serves as a wrapper over the <a href="https://github.com/natverse/fafbseg" class="external-link">fafbseg</a> package, the wrapper adds:</p>
<ol style="list-style-type: decimal">
<li>Setup of necessary default paths / data redirects.</li>
<li>Integration with <a href="https://proofreading.zetta.ai/info/" class="external-link">CAVE tables</a> for storing various annotation information.</li>
<li>Relevant helper functions called from the <a href="https://github.com/flyconnectome/bancr" class="external-link">bancr</a> package.</li>
<li>CRANT project specific data wrangling and browsing code.</li>
</ol>
<div class="float">
<img src="https://github.com/flyconnectome/crantr/blob/main/inst/images/crantb_example_neuron.png?raw=true" alt="crantb_example_neuron"><div class="figcaption">crantb_example_neuron</div>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <code>crantr</code> from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'flyconnectome/crantr'</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'natverse/fafbseg@asb-dev'</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="authorisation">Authorisation<a class="anchor" aria-label="anchor" href="#authorisation"></a>
</h3>
<p>To use the <strong>crantr</strong> package, you need authorisation to access CRANT resources.</p>
<p>Follow these steps to set up your access CAVE token, if you have been given authorisation:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set up token - will open your browser to generate a new token</span></span>
<span><span class="fu"><a href="reference/crant_set_token.html">crant_set_token</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If you already have a token:</span></span>
<span><span class="co"># crant_set_token("&lt;my token&gt;")</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="verifying-setup">Verifying Setup<a class="anchor" aria-label="anchor" href="#verifying-setup"></a>
</h3>
<p>To ensure everything is set up correctly, run:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Diagnose issues</span></span>
<span><span class="fu">fafbseg</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/fafbseg/man/dr_fafbseg.html" class="external-link">dr_fafbseg</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Confirm functionality</span></span>
<span><span class="fu"><a href="reference/crant_islatest.html">crant_islatest</a></span><span class="op">(</span><span class="st">"576460752684030043"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="python-dependencies">Python Dependencies<a class="anchor" aria-label="anchor" href="#python-dependencies"></a>
</h3>
<p>Some functions rely on underlying Python code. To install the full set of recommended libraries, including <code>fafbseg-py</code>, run:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fafbseg</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/fafbseg/man/simple_python.html" class="external-link">simple_python</a></span><span class="op">(</span><span class="st">"full"</span><span class="op">)</span></span></code></pre></div>
<p>If you encounter errors related to cloud-volume, update it with:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fafbseg</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/fafbseg/man/simple_python.html" class="external-link">simple_python</a></span><span class="op">(</span><span class="st">'none'</span>, pkgs<span class="op">=</span><span class="st">'cloud-volume~=8.32.1'</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>Use <code><a href="reference/choose_crant.html">with_crant()</a></code> to wrap additional <code>fafbseg::flywire_*</code> functions for use with CRANT data. Alternatively, use <code><a href="reference/choose_crant.html">choose_crant()</a></code> to set all <code>flywire_*</code> functions from <code>fafbseg</code> to target CRANT.</p>
<p>Example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/flyconnectome/crantr" class="external-link">crantr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/choose_crant.html">choose_crant</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Your analysis code here</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="updating">Updating<a class="anchor" aria-label="anchor" href="#updating"></a>
</h2>
<p>To update the package and all dependencies:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'flyconnectome/crantr'</span><span class="op">)</span></span></code></pre></div>
<p>To update a specific Python library dependency:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fafbseg</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/fafbseg/man/simple_python.html" class="external-link">simple_python</a></span><span class="op">(</span>pkgs<span class="op">=</span><span class="st">'fafbseg'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="tutorial">Tutorial<a class="anchor" aria-label="anchor" href="#tutorial"></a>
</h2>
<p>One of the initial projects with the CRANTb dataset is to explore the olfactory system of the ant, led by <a href="https://www.linkedin.com/in/lindsey-e-lopes-a16a3292" class="external-link">Lindsey E Lopes</a> in the <a href="https://www.rockefeller.edu/research/2280-kronauer-laboratory/" class="external-link">Laboratoy of Social Evolution and Behavior</a>.</p>
<p>Let us look at some antennal lobe projection neurons.</p>
<p>If you are a collaborator on the project and have access to our <a href="https://cloud.seatable.io/workspace/62919/dtable/CRANTb/?tid=0000&amp;vid=0000" class="external-link">seatable</a>, you can do this:</p>
<div class="float">
<img src="https://github.com/flyconnectome/crantr/blob/main/inst/images/ant_table.png?raw=true" alt="ant_table"><div class="figcaption">ant_table</div>
</div>
<pre><code><span><span class="co"># load library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/flyconnectome/crantr" class="external-link">crantr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get meta data, will one day be available via CAVE tables</span></span>
<span><span class="va">ac</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/crant_table_query.html">crant_table_query</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># have a look at it!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">ac</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># filter to get our IDs</span></span>
<span><span class="va">pn.meta</span> <span class="op">&lt;-</span> <span class="va">ac</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cell_class</span><span class="op">==</span><span class="st">"olfactory_projection_neuron"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get our ids</span></span>
<span><span class="va">pn.ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">pn.meta</span><span class="op">$</span><span class="va">root_id</span><span class="op">)</span></span></code></pre>
<p>If not, here are some neuron IDs to get started:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/flyconnectome/crantr" class="external-link">crantr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># specify IDs to examine, could also be gotten from a CAVE table</span></span>
<span><span class="va">pn.ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"576460752684030043"</span>, <span class="st">"576460752688452399"</span>, <span class="st">"576460752688452655"</span>, </span>
<span><span class="st">"576460752666304186"</span>, <span class="st">"576460752683636730"</span>, <span class="st">"576460752724736013"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># update these IDs to their most current versions, they change after each proofreading edit</span></span>
<span><span class="va">pn.ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/crant_latestid.html">crant_latestid</a></span><span class="op">(</span><span class="va">pn.ids</span><span class="op">)</span></span></code></pre></div>
<p>Now we can read mesh data for these reconstructions and plot them together with a surface model of the <code>CRANTb</code> brain, using <code>rgl</code>!</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># fetch</span></span>
<span><span class="va">pn.meshes</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/crant_read_neuron_meshes.html">crant_read_neuron_meshes</a></span><span class="op">(</span><span class="va">pn.ids</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot brain</span></span>
<span><span class="fu"><a href="reference/crant_view.html">crant_view</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">plot3d</span><span class="op">(</span><span class="va">crantb.surf</span>, col <span class="op">=</span> <span class="st">"lightgrey"</span>, alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot neurons</span></span>
<span><span class="fu">plot3d</span><span class="op">(</span><span class="va">pn.meshes</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="https://github.com/flyconnectome/crantr/blob/main/inst/images/crantb_example_neuron_meshes.png?raw=true" alt="crantb_example_neuron_meshes"><div class="figcaption">crantb_example_neuron_meshes</div>
</div>
<p>We can also make this plot in 2D, in the popular <code>ggplot2</code> framework.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggplot</span></span>
<span><span class="fu"><a href="reference/crant_ggneuron.html">crant_ggneuron</a></span><span class="op">(</span><span class="va">pn.meshes</span> , volume <span class="op">=</span> <span class="va">crantb.surf</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="https://github.com/flyconnectome/crantr/blob/main/inst/images/crantb_example_neuron_ggplot.png?raw=true" alt="crantb_example_neuron_ggplot"><div class="figcaption">crantb_example_neuron_ggplot</div>
</div>
<p>Sometimes it is also useful for work with skeletons, for example for NBLASTing neurons. We can swiftly fetch the L2 skeletons of a neuron, built from its super-voxel locations using the python library <a href="https://github.com/AllenInstitute/pcg_skel" class="external-link">pcg_skel</a>, as so:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># fetch</span></span>
<span><span class="va">pn.skels</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/crant_read_l2skel.html">crant_read_l2skel</a></span><span class="op">(</span><span class="va">pn.ids</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot brain</span></span>
<span><span class="fu">nopen3d</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/crant_view.html">crant_view</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">plot3d</span><span class="op">(</span><span class="va">crantb.surf</span>, col <span class="op">=</span> <span class="st">"lightgrey"</span>, alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot neurons</span></span>
<span><span class="fu">plot3d</span><span class="op">(</span><span class="va">pn.skels</span>, lwd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="https://github.com/flyconnectome/crantr/blob/main/inst/images/crantb_example_neuron_skeletons.png?raw=true" alt="crantb_example_neuron_skeletons"><div class="figcaption">crantb_example_neuron_skeletons</div>
</div>
<p>We can also query synaptic connectivity and neuron volumes directly from CAVE:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Synaptic partners</span></span>
<span><span class="fu"><a href="reference/crant_partner_summary.html">crant_partner_summary</a></span><span class="op">(</span><span class="va">pn.ids</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/crant_partner_summary.html">crant_partners</a></span><span class="op">(</span><span class="va">pn.ids</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, partners <span class="op">=</span> <span class="st">"output"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Neuron volume (nm³) via L2 cache — no mesh download required</span></span>
<span><span class="fu"><a href="reference/crant_neuron_volume.html">crant_neuron_volume</a></span><span class="op">(</span><span class="va">pn.ids</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="meta-data-management-in-seatable">Meta data management in seatable<a class="anchor" aria-label="anchor" href="#meta-data-management-in-seatable"></a>
</h2>
<div class="float">
<img src="https://github.com/flyconnectome/crantr/blob/main/inst/images/ant_table.png?raw=true" alt="ant_table"><div class="figcaption">ant_table</div>
</div>
<p>Seatable is a powerful way to make collaborative annotations in this connectome dataset and we encourage you to use it rather than keeping your own google sheets or similar to track neurons. It works similarly to google sheets, but has better filter views, data type management, programmatic access, etc. It should work in the browser and as an <a href="https://seatable.io/en" class="external-link">app</a>.</p>
<p>See our seatable <a href="https://cloud.seatable.io/workspace/62919/dtable/CRANTb/?tid=0000&amp;vid=0000" class="external-link">here</a>. If this link does not work you can request access by contacting Lindsey Lopes.</p>
<p>Each row is a <code>CRANTb</code> neuron. If you hover your tool-tip over the <strong>i</strong> icon in each column header, you can see what that column records. Each neuron is identified by its unique 16-digit integer <code>root_id</code>, which is modified each time the neuron is edited. As <code>CRANTb</code> is an active project, this happens frequently so our seatable needs to keep track of changes, which it does on a daily schedule.</p>
<p>The update logic is <code>position</code> (voxel space) -&gt; <code>supervoxel_id</code> -&gt; <code>root_id</code>. If <code>position</code> and <code>supervoxel_id</code> are missing, <code>root_id</code> is updated directly but this is longer. It will also take the most up to date <code>root_id</code> with the most number of voxels from the previous root_id, so if a neuron is split this could be the incorrect choice. Updating from <code>position</code> gives you the neuron at that position, regardless of its size, merges or splits. Best practice is to add position always if you can, and <code>root_id</code> in addition if you want. You may want to add only <code>root_id</code> alone if you want to track a neuron but do not yet have a good position for it. A good position is a point on the neuron that you expect not to change during proofreading, e.g. the first branch point in the neuron where it splits from the primary neurite into axon and dendrite.</p>
<div class="float">
<img src="https://github.com/flyconnectome/crantr/blob/main/inst/images/ant_table_ids.png?raw=true" alt="ant_table_ids"><div class="figcaption">ant_table_ids</div>
</div>
<p>You can access the seatable programmatically using the <code>crantr</code>, if you have access.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'flyconnectome/crantr'</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/flyconnectome/crantr" class="external-link">crantr</a></span><span class="op">)</span></span></code></pre></div>
<p>You will first need to obtain your authorised login credentials, you only need to do this once:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/crant_table_query.html">crant_table_set_token</a></span><span class="op">(</span>user<span class="op">=</span><span class="st">"MY_EMAIL_FOR_SEATABLE"</span>,</span>
<span>               pwd<span class="op">=</span><span class="st">"MY_SEATABLE_PASSWORD"</span>,</span>
<span>               url<span class="op">=</span><span class="st">"https://cloud.seatable.io/"</span><span class="op">)</span></span></code></pre></div>
<p>And then you may read the data, and make nice plots from it!</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read CRANTb meta seatable</span></span>
<span><span class="va">ac</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/crant_table_query.html">crant_table_query</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>You can also update rows automatically. Be careful when doing this. If you want to be sure not to mess something up, you can take a ‘snapshot’ of the seatable before you edit it in the browser, which will save a historical version.</p>
<p>You can then change columns in <code>ac</code>, keeping their names, as you like. Then to update via R:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Update</span></span>
<span><span class="fu"><a href="reference/crant_table_query.html">crant_table_update_rows</a></span><span class="op">(</span>base<span class="op">=</span><span class="st">"CRANTb"</span>, </span>
<span>                     table <span class="op">=</span> <span class="st">"CRANTb_meta"</span>, </span>
<span>                     df <span class="op">=</span> <span class="va">ac.new</span>, </span>
<span>                     append_allowed <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                     chunksize <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p>To update, you must have the seatable identifier for each column in <code>ac.new</code>, i.e. an <code>_id</code> column.</p>
<p>This method is good for bulk uploads/changes.</p>
<p>You can also make a quick, simpler update, replacing one column’s entries with a given <code>update</code> for a set of root IDs.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/crant_table_query.html">crant_table_annotate</a></span><span class="op">(</span>root_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"576460752667713229"</span>,</span>
<span>                               <span class="st">"576460752662519193"</span>,</span>
<span>                               <span class="st">"576460752730083020"</span>,</span>
<span>                               <span class="st">"576460752673660716"</span>,</span>
<span>                               <span class="st">"576460752662521753"</span><span class="op">)</span>,</span>
<span>                  update <span class="op">=</span> <span class="st">"lindsey_lopes"</span>,</span>
<span>                  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                  append <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                  column <span class="op">=</span> <span class="st">"user_annotator"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-acknowledgment">Data Acknowledgment<a class="anchor" aria-label="anchor" href="#data-acknowledgment"></a>
</h2>
<p>When using CRANT data, please acknowledge it in accordance with the <a href="https://github.com/jasper-tms/the-CRANT-fly-connectome/wiki/" class="external-link">CRANT community guidelines</a> and in agreement with the CRANT consortium.</p>
</div>
<div class="section level2">
<h2 id="citations">Citations<a class="anchor" aria-label="anchor" href="#citations"></a>
</h2>
<p>If you use this package, please cite:</p>
<ol style="list-style-type: decimal">
<li>The upcoming CRANT paper (TBD)</li>
<li>The natverse paper: <a href="https://elifesciences.org/articles/53350" class="external-link">Bates et al. 2020</a>
</li>
<li>This R package:</li>
</ol>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"crantr"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Bates A</strong> (2024). <em>crantr: R Client Access to the Clonal Raider ANT (CRANT) Dataset</em>. R package version 0.2.0, <a href="https://github.com/flyconnectome/crantr" class="external-link uri">https://github.com/flyconnectome/crantr</a>.</p>
<p>Note, a similar python-based tool is available <a href="https://social-evolution-and-behavior.github.io/crantpy/intro.html" class="external-link">here</a>.</p>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<ul>
<li>CRANTb data set: Lindsey E. Lopes and David G.C. Hildebrand prepared the clonal raider ant brain sample. The EM dataset was collected at Harvard Medical School in the <a href="https://www.lee.hms.harvard.edu/" class="external-link">laboratory of Wei-Chung Allen Lee</a>, by Wangchu Xiang, Mohd Mazri, and Lindsey E. Lopes.</li>
<li>Segmentation and synapse prediction: Built by <a href="https://zetta.ai/" class="external-link">Zetta.ai</a>.</li>
<li>Neuron reconstruction: Hosted and supported by the laboratory of Wei-Chung Allen Lee at Harvard Medical School, the laboratory of Hannah Haberkern at University of Würzburg, and the Laboratory of Social Evolution and Behavior at The Rockefeller University.</li>
<li>R package: Initialized using the <a href="https://github.com/flyconnectome/fancr" class="external-link">fancr</a> package developed by Greg Jefferis at the MRC Laboratory of Molecular Biology, Cambridge, UK.</li>
<li>Development: Alexander S. Bates worked on this R package while in the laboratory of Rachel Wilson at Harvard Medical School.</li>
</ul>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p><strong>Bates, Alexander Shakeel, James D. Manton, Sridhar R. Jagannathan, Marta Costa, Philipp Schlegel, Torsten Rohlfing, and Gregory SXE Jefferis</strong>. 2020. <em>The Natverse, a Versatile Toolbox for Combining and Analysing Neuroanatomical Data.</em> eLife 9 (April). <a href="https://doi.org/10.7554/eLife.53350" class="external-link uri">https://doi.org/10.7554/eLife.53350</a>.</p>
</div>

  </main><aside class="col-md-3"></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alexander Bates.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
